# 羽毛球球速標註工具

這是一個基於Web的工具，用於分析羽毛球影片並計算擊球速度。使用者可以上傳影片，標記擊球點和落點，工具會自動計算球速並支援 CSV 匯出。

## 功能特色

- **影片上傳與播放**：支援常見影片格式，提供播放/暫停、逐幀/逐秒快進快退、播放速度調整等功能。
- **視覺化標記**：可於影片畫面直接標記擊球點與落點，並即時顯示於畫面上。
- **自動球速計算**：根據標記點的像素距離與時間差，自動計算球速（支援自訂像素與公尺轉換比例）。
- **CSV 數據匯出**：可將所有標記點座標、時間戳、計算球速等資料匯出為 CSV 檔案。
- **影片拍攝時間解析**：自動解析影片元數據中的拍攝時間，並應用於匯出資料。

## 技術棧

- **前端**：React.js (Vite)
- **UI 框架**：Material-UI (MUI)
- **影片處理**：HTML5 `<video>` 元素，`mediainfo.js` 解析影片元數據
- **數據處理**：`papaparse` 進行 CSV 匯出

## 如何使用

1. **啟動應用程式**：
   - 安裝 Node.js 與 npm。
   - 於專案根目錄執行 `npm install` 安裝依賴。
   - 執行 `npm run dev` 啟動開發伺服器，瀏覽器將自動開啟。

2. **上傳影片**：
   - 點擊「選擇影片」按鈕，上傳羽毛球影片。

3. **設定 PIXEL_TO_METER 比例**：
   - 於右上角調整「PIXEL_TO_METER」數值（1 像素等於多少公尺），可依據場地已知物體尺寸估算。

4. **標記擊球點與落點**：
   - 播放影片時，點擊畫面新增標記。
   - **擊球點**：球拍與球接觸時點擊。
   - **落點**：羽球落地時點擊。
   - 每組標記（擊球點+落點）自動計算球速，並顯示於下方表格。
   - 支援快捷鍵：
     - `空白鍵`：播放/暫停
     - `左方向鍵`：後退一幀（連按為一秒）
     - `右方向鍵`：前進一幀（連按為一秒）
     - `A`：降低播放速度
     - `D`：提高播放速度

5. **查看與編輯數據**：
   - 下方表格列出所有標記及球速。
   - 點擊表格列可跳轉至對應擊球點。
   - 可刪除與重新標註不正確的標記。

6. **匯出 CSV**：
   - 點擊「匯出 CSV」按鈕，下載所有標記與球速資料。
   - CSV 包含：擊球點/落點 X/Y 座標、影片時間戳、實際時間戳、球速。

## 專案結構

```
.gitignore
index.html
package-lock.json
package.json
README.md
vite.config.js
public/
│   └── mediainfo.wasm
src/
│   ├── App.css
│   ├── App.jsx
│   ├── index.css
│   ├── main.jsx
│   ├── components/
│   │   ├── ExportCSVButton.jsx
│   │   ├── VideoPlayer.jsx
│   │   └── video/
│   │       ├── PlayPauseButton.jsx
│   │       ├── TimeDisplay.jsx
│   │       ├── VideoControls.jsx
│   │       ├── VideoMarkers.jsx
│   │       └── VideoOverlay.jsx
│   └── utils/
│       ├── csvExport.js
│       └── speedCalc.js
```

## 常見問題

- **Q：影片無法上傳或播放？**
  - 請確認影片格式支援（如 mp4、mov 等），並檢查瀏覽器支援度。
- **Q：球速計算不準？**
  - 請正確設定 PIXEL_TO_METER 比例，建議以場地已知長度作為參考。

## 貢獻

歡迎任何形式的貢獻！如有建議或發現 Bug，請提出 Issue 或提交 Pull Request。

## 聯絡方式

如需協助，請於 GitHub Issue 留言。